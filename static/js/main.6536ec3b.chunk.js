(this.webpackJsonpreact_calendar=this.webpackJsonpreact_calendar||[]).push([[0],[,,,,,,,,,,,,function(e,t,n){e.exports={pColor:"#5d5d5d",loginWidth:"40rem",mainColor:"#00AB9F",borderColor:"rgb(224, 224, 224)",subColor:"#c5d632",container:"login_container__3-Cm1",loginCotaniner:"login_loginCotaniner__qXaQO",logo:"login_logo__3Aogi",imgBox:"login_imgBox__1xcEq",btnBox:"login_btnBox__1yMyp",btn:"login_btn__2v8Z3",naverLogin:"login_naverLogin__3QjxH"}},,,,,function(e,t,n){e.exports={loginWidth:"40rem",pColor:"#5d5d5d",mainColor:"#00AB9F",container:"home_container__3rE5B",box:"home_box__hRHlm",title:"home_title__32KQw",itemForm:"home_itemForm__37Qsk",btn:"home_btn__2M0q0",resultSub:"home_resultSub__1cx8-"}},,,,function(e,t,n){e.exports={sub_p:"home_sign_sub_p__3grym"}},function(e,t,n){e.exports={subColor:"#c5d632",mainColor:"#00AB9F",pColor:"#5d5d5d",font_white:"#f7f7f7",container:"clickDate_container__1RXuI",dayNumber:"clickDate_dayNumber__2Sz4h",itemContainer:"clickDate_itemContainer__1YQSo",btn:"clickDate_btn__3PLMo",h3:"clickDate_h3__1wvrF"}},,,,function(e,t,n){e.exports={sub_p:"home_result_sub_p__TyZPZ"}},function(e,t,n){e.exports={container:"showDate_container__3bqbt",dayContainer:"showDate_dayContainer__2Vspd",makeDateContainer:"showDate_makeDateContainer__6ijh9",calendarContainer:"showDate_calendarContainer__9TWt9"}},function(e,t,n){e.exports={mainColor:"#00AB9F",subColor:"#c5d632",date:"makeDate_date__1FVhl",title:"makeDate_title__QyPi8",cal:"makeDate_cal__LXnIm",today:"makeDate_today__18Ba_",clickDate:"makeDate_clickDate__2kd45"}},,,function(e,t,n){e.exports={mainColor:"#00AB9F",subColor:"#c5d632",font_white:"#f7f7f7",logo:"header_logo__3IWXu",singOutBtn:"header_singOutBtn__s7SIX"}},,,function(e,t,n){e.exports={dateContainer:"calendar_dateContainer__23pbX",container:"calendar_container__zPIEG"}},,,,,,function(e,t,n){e.exports={subColor:"#c5d632",font_white:"#f7f7f7",container:"footer_container__3Vr4i"}},function(e,t,n){e.exports={itemContainer:"clickDate_input_itemContainer__2V7qg"}},function(e,t,n){e.exports={mainColor:"#00AB9F",font_white:"#f7f7f7",link:"clickDate_linkBtn_link__3g6F2"}},,function(e,t,n){e.exports={resultCalorie:"makeDateList_resultCalorie__n69FK"}},function(e,t,n){e.exports={title:"slideCalendar_title__vxKQ3"}},,,,,,function(e,t,n){},function(e,t,n){},,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var o=n(1),a=n(2),r=n.n(a),i=n(38),c=n.n(i),_=(n(51),n(52),n(12)),u=n.n(_),l=n(6),s=n(31),d=n.n(s),O=n(19),f=n(18),h=Object(a.memo)((function(e){var t=e.auth,n=Object(l.d)(),r=Object(a.useCallback)((function(){localStorage.getItem("kakaoToken")?(localStorage.removeItem("kakaoToken"),t.kakaoLogout()):t.signOut().then((function(){n.push("/")})).catch((function(e){return console.log(e)}))}),[t,n]);return Object(o.jsxs)("div",{className:d.a.logo,children:[t&&Object(o.jsx)("button",{className:d.a.singOutBtn,onClick:r,children:"Sign Out"}),Object(o.jsx)(f.a,{icon:O.c}),Object(o.jsx)("span",{children:"Diet Calendar"})]})})),S=function(e){var t=e.auth,n=Object(l.d)(),r=Object(l.e)(),i=Object(a.useRef)(),c=Object(a.useCallback)((function(e){n.push({pathname:"/Home",state:{userId:e}})}),[n]),_=Object(a.useCallback)((function(){if(r.hash){var e=r.hash.split("=")[1].split("&")[0];localStorage.setItem("naver_token",e)}}),[r.hash]);return Object(a.useEffect)((function(){t.initializeNaverLogin(),_()}),[t,_]),Object(a.useEffect)((function(){t.onAuthChange((function(e){e&&c(e.uid)}))}),[t,c]),Object(a.useEffect)((function(){var e=new URLSearchParams(r.search).get("code");if(null===e)return!1;t.fetchToken(e).then((function(e){return localStorage.setItem("kakaoToken",e.id),c(e.id)}))}),[t,r.search,c]),Object(a.useEffect)((function(){var e=localStorage.getItem("naver_token");e&&t.fetchNaverToken(e).then((function(e){return console.log(e)}))}),[t]),Object(o.jsx)("section",{className:u.a.container,children:Object(o.jsxs)("div",{className:u.a.loginCotaniner,children:[Object(o.jsx)(h,{}),Object(o.jsx)("div",{className:u.a.imgBox,children:Object(o.jsx)("img",{src:"./img/1.jpg",alt:"workout"})}),Object(o.jsxs)("div",{className:u.a.btnBox,children:[Object(o.jsx)("button",{onClick:function(){t.googleAuth().then((function(e){return c(e.user.uid)}))},className:u.a.btn,children:"Google"}),Object(o.jsx)("button",{onClick:function(e){t.loginKakao()},className:u.a.btn,children:"Kakao"}),Object(o.jsx)("button",{onClick:function(e){e.preventDefault(),i.current.firstChild.click()},className:u.a.btn,children:"Naver"}),Object(o.jsx)("div",{id:"naverIdLogin",ref:i,onClick:function(e){e.preventDefault()},className:u.a.naverLogin})]})]})})};n(7),n(40),n(26),n(21),n(17),n(41),n(13),n(42),n(22),n(34),n(27),n(28),n(43),n(44),n(45),new Date,(new Date).getMonth();var C=function(e){var t=e.auth,n=e.repository;return Object(o.jsx)(S,{auth:t,repository:n})},E=n(9),T=n.n(E),p=n(14),v=n(24),b=n(25),k=n(23),m=(n(60),n(62),{apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"/react-dietCalendar",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_FIREBASE_API_KEY,authDomain:Object({NODE_ENV:"production",PUBLIC_URL:"/react-dietCalendar",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_FIREBASE_AUTH,projectId:Object({NODE_ENV:"production",PUBLIC_URL:"/react-dietCalendar",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_FIREBASE_PROJECT_ID,appId:Object({NODE_ENV:"production",PUBLIC_URL:"/react-dietCalendar",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_FIREBASE_APP_ID});k.a.initializeApp(m);var A=k.a.auth(),D=k.a.database(),g=new k.a.auth.GoogleAuthProvider,j=function(){function e(){Object(v.a)(this,e)}return Object(b.a)(e,[{key:"loadUser",value:function(){var e=Object(p.a)(T.a.mark((function e(t,n){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.ref("".concat(t,"/date")).on("value",(function(e){var t=e.val();n(t)}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"saveData",value:function(){var e=Object(p.a)(T.a.mark((function e(t,n){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.ref("".concat(t,"/date")).set(n);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteData",value:function(e,t){D.ref("".concat(e,"/date/")).remove(t)}},{key:"updateDate",value:function(e,t){D.ref("".concat(e,"/date/")).update(t)}}]),e}(),R=window.naver,P=window.Kakao,K=function(){function e(){Object(v.a)(this,e)}return Object(b.a)(e,[{key:"googleAuth",value:function(){var e=g;return A.signInWithPopup(e)}},{key:"loginKakao",value:function(){P.Auth.authorize({redirectUri:Object({NODE_ENV:"production",PUBLIC_URL:"/react-dietCalendar",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_KAKAO_URL})}},{key:"fetchToken",value:function(){var e=Object(p.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"POST",redirect:"follow"},e.next=3,fetch("https://kauth.kakao.com/oauth/token?grant_type=authorization_code&client_id=".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/react-dietCalendar",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_KAKAO_KEY,"&redirect_uri=").concat(Object({NODE_ENV:"production",PUBLIC_URL:"/react-dietCalendar",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_KAKAO_URL,"&code=").concat(t),n).then((function(e){return e.json()})).then((function(e){return fetch("https://kapi.kakao.com/v2/user/me",{method:"GET",headers:{Authorization:"Beaer ".concat(e.access_token)},redirect:"follow"})})).then((function(e){return e}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"kakaoLogout",value:function(){var e=Object(p.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("kauth.kakao.com/oauth/logout?client_id=".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/react-dietCalendar",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_KAKAO_KEY,"&logout_redirect_uri=").concat(Object({NODE_ENV:"production",PUBLIC_URL:"/react-dietCalendar",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_KAKAO_URL));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeNaverLogin",value:function(){new R.LoginWithNaverId({clientId:Object({NODE_ENV:"production",PUBLIC_URL:"/react-dietCalendar",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_NAVER_ID,callbackUrl:Object({NODE_ENV:"production",PUBLIC_URL:"/react-dietCalendar",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_NAVER_URL,isPopup:!1,loginButton:{color:"green",type:1,height:30},callbackHandlke:!0}).init()}},{key:"fetchNaverToken",value:function(){var e=Object(p.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://openapi.naver.com/v1/nid/me",{method:"GET",headers:{Authorization:"Bearer ".concat(t)},redirect:"follow"}).then((function(e){return e.json()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){return A.signOut()}},{key:"onAuthChange",value:function(e){A.onAuthStateChanged((function(t){e(t)}))}}]),e}(),x=new j,N=new K;c.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(C,{auth:N,repository:x})}),document.getElementById("root"))}],[[65,1,2]]]);
//# sourceMappingURL=main.6536ec3b.chunk.js.map